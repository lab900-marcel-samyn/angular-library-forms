<div class="mat-elevation-z8">
    <mat-table [dataSource]="data">
        <ng-container *ngFor="let column of columns" matColumnDef="{{column.attribute}}" [sticky]="column?.overviewOptions?.sticky">
            <mat-header-cell *matHeaderCellDef
                             [ngStyle]="column?.overviewOptions?.displayOptions?.maxColumnWidth &&
                                { 'max-width': column?.overviewOptions?.displayOptions?.maxColumnWidth }">
                {{column.title }} </mat-header-cell>
            <mat-cell *matCellDef="let element"
                      [ngStyle]="column?.overviewOptions?.displayOptions?.maxColumnWidth &&
                                { 'max-width': column?.overviewOptions?.displayOptions?.maxColumnWidth }">
                <a *ngIf="column.overviewOptions?.onClick" href="javascript://" (click)="column.overviewOptions?.onClick(column, element[column.attribute], element)">
                    <lab900-admin-table-cell [column]="column" [row]="element"></lab900-admin-table-cell>
                </a>
                <lab900-admin-table-cell *ngIf="!column.overviewOptions?.onClick" [column]="column" [row]="element"></lab900-admin-table-cell>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="edit" stickyEnd>
            <mat-header-cell *matHeaderCellDef  class="table__row__icon"></mat-header-cell>
            <mat-cell *matCellDef="let element" class="table__row__icon">
                <button mat-icon-button lab900FormDialog [data]="element" [schema]="editForm" [submitFormHandler]="editHandler">
                    <mat-icon>edit</mat-icon>
                </button>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="delete" stickyEnd>
            <mat-header-cell *matHeaderCellDef  class="table__row__icon"></mat-header-cell>
            <mat-cell *matCellDef="let element" class="table__row__icon">
                <button mat-icon-button (confirmed)="delete.emit(element)" lab900ConfirmationDialog>
                    <mat-icon>delete</mat-icon>
                </button>
            </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;" class="table__row">
            <div *ngIf="!loading">
                <mat-spinner></mat-spinner>
            </div>
        </mat-row>
    </mat-table>
    <mat-card *ngIf="loading" style="display: flex; justify-content: center; align-items: center">
        <mat-progress-spinner
                color="primary"
                mode="indeterminate">
        </mat-progress-spinner>
    </mat-card>
    <mat-paginator hidePageSize [disabled]="loading" (page)="pageEvent.emit($event)" length="9999999"></mat-paginator>
</div>
